<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>FOOT CARE TRAINING</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    padding: 20px;
}
h1 {
    text-align: center;
    color: #6a1b9a;
}
.card {
    background: white;
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 20px;
}
button {
    background: #6a1b9a;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
}
button:disabled {
    background: gray;
}
.timer {
    font-size: 32px;
    text-align: center;
    margin: 10px 0;
}
table {
    width: 100%;
    border-collapse: collapse;
}
th, td {
    border: 1px solid #ccc;
    padding: 8px;
    text-align: center;
}
th {
    background: #eee;
}
</style>
</head>

<body>

<h1>FOOT CARE</h1>

<div class="card">
    <h2>‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å</h2>
    <p>‚Ä¢ ‡∏¢‡∏Å‡πÄ‡∏ó‡πâ‡∏≤ (Dorsi): 5 ‡πÄ‡∏ã‡∏ó ‡πÄ‡∏ã‡∏ó‡∏•‡∏∞ 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</p>
    <p>‚Ä¢ ‡πÄ‡∏´‡∏¢‡∏µ‡∏¢‡∏î‡πÄ‡∏ó‡πâ‡∏≤ (Plantar): 5 ‡πÄ‡∏ã‡∏ó ‡πÄ‡∏ã‡∏ó‡∏•‡∏∞ 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</p>

    <div class="timer" id="timer">30</div>
    <button onclick="startTraining()" id="startBtn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ù‡∏∂‡∏Å</button>
</div>

<div class="card">
    <h2>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</h2>
    <table>
        <thead>
            <tr>
                <th>‡πÄ‡∏ã‡∏ó</th>
                <th>Dorsi (¬∞)</th>
                <th>Plantar (¬∞)</th>
                <th>ROM (¬∞)</th>
            </tr>
        </thead>
        <tbody id="resultTable"></tbody>
    </table>
</div>

<div class="card">
    <h2>‡∏Å‡∏£‡∏≤‡∏ü‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å</h2>
    <canvas id="resultChart"></canvas>
</div>

<script>
let currentSet = 0;
let totalSet = 5;
let timeLeft = 30;
let timerInterval;

let dorsiData = [];
let plantarData = [];
let romData = [];

const timerEl = document.getElementById("timer");
const tableEl = document.getElementById("resultTable");
const startBtn = document.getElementById("startBtn");

const ctx = document.getElementById("resultChart");
const chart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: [],
        datasets: [
            {
                label: 'Dorsi',
                data: [],
            },
            {
                label: 'Plantar',
                data: [],
            },
            {
                label: 'ROM',
                data: [],
            }
        ]
    }
});

function startTraining() {
    startBtn.disabled = true;
    nextSet();
}

function nextSet() {
    if (currentSet >= totalSet) {
        startBtn.disabled = false;
        alert("‡∏ù‡∏∂‡∏Å‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡πÄ‡∏ã‡∏ó‡πÅ‡∏•‡πâ‡∏ß ‚úÖ");
        return;
    }

    currentSet++;
    timeLeft = 30;
    timerEl.textContent = timeLeft;

    timerInterval = setInterval(() => {
        timeLeft--;
        timerEl.textContent = timeLeft;

        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            saveResult();
            nextSet();
        }
    }, 1000);
}

function saveResult() {
    // üî∏ ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏à‡∏≥‡∏•‡∏≠‡∏á (‡∏™‡∏∏‡πà‡∏°)
    let dorsi = Math.floor(Math.random() * 20) + 10;
    let plantar = Math.floor(Math.random() * 30) + 20;
    let rom = plantar - dorsi;

    dorsiData.push(dorsi);
    plantarData.push(plantar);
    romData.push(rom);

    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ñ‡∏ß‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
    const row = `
        <tr>
            <td>${currentSet}</td>
            <td>${dorsi}</td>
            <td>${plantar}</td>
            <td>${rom}</td>
        </tr>
    `;
    tableEl.innerHTML += row;

    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏£‡∏≤‡∏ü
    chart.data.labels.push("‡πÄ‡∏ã‡∏ó " + currentSet);
    chart.data.datasets[0].data = dorsiData;
    chart.data.datasets[1].data = plantarData;
    chart.data.datasets[2].data = romData;
    chart.update();
}
</script>

</body>
</html>

