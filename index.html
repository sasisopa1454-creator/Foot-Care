<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ankle Rehab Monitor</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
  margin:0;
  font-family:Arial;
  overflow:hidden;
  transition:0.3s;
}
.light{ background:#f2f2f2; color:#000; }
.dark{ background:#121212; color:#fff; }

.wrapper{
  height:100vh;
  display:flex;
  flex-direction:column;
  padding:8px;
  box-sizing:border-box;
}

.top{
  display:flex;
  justify-content:space-around;
  align-items:center;
  height:18%;
}

.box{
  border:1.5px solid #444;
  border-radius:10px;
  padding:8px;
  width:160px;
  text-align:center;
  background:white;
}
.dark .box{ background:#2b2b2b; border-color:#aaa; }

.middle{
  flex:1;
  display:flex;
  gap:12px;
}

.chartBox{
  flex:1;
  background:white;
  padding:10px;
  border-radius:12px;
}
.dark .chartBox{ background:#1e1e1e; }

canvas{
  height:100% !important;
}

button{
  padding:6px 10px;
  margin-top:5px;
  cursor:pointer;
}
</style>
</head>

<body class="light">

<div class="wrapper">

<h3 id="statusText">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å</h3>
<h3 id="timerText">‡πÄ‡∏ß‡∏•‡∏≤: 0 ‡∏ß‡∏¥</h3>

<div class="top">

<div class="box">
<b>Dorsi</b>
<div id="dorsi">0¬∞</div>
<div>Set: <span id="dorsiSet">1</span> / 5</div>
<button onclick="startMode('dorsi')">Start</button>
</div>

<div class="box">
<b>Plantar</b>
<div id="plantar">0¬∞</div>
<div>Set: <span id="plantarSet">1</span> / 5</div>
<button onclick="startMode('plantar')">Start</button>
</div>

<div class="box">
<b>Dark Mode</b><br>
<button onclick="toggleMode()">üåô / ‚òÄÔ∏è</button>
</div>

</div>

<div class="middle">

<div class="chartBox">
<canvas id="angleChart"></canvas>
</div>

<div class="chartBox">
<canvas id="rateChart"></canvas>
</div>

</div>
</div>

<script>

let duration = 30;
let timer;
let running = false;
let mode = null;
let dorsiSet = 1;
let plantarSet = 1;
let prevAngle = 0;

// ===== Graph 1 (Angle) =====
const angleChart = new Chart(document.getElementById("angleChart"), {
    type:'line',
    data:{
        labels:[],
        datasets:[
            {
                label:'Plantar',
                data:[],
                borderColor:'blue',
                tension:0.3
            },
            {
                label:'Dorsi',
                data:[],
                borderColor:'red',
                tension:0.3
            }
        ]
    },
    options:{
        responsive:true,
        maintainAspectRatio:false
    }
});

// ===== Graph 2 (Rate of Motion) =====
const rateChart = new Chart(document.getElementById("rateChart"), {
    type:'bar',
    data:{
        labels:[],
        datasets:[
            {
                label:'Rate of Motion (deg/sec)',
                data:[],
                backgroundColor:'rgba(0,200,0,0.6)'
            }
        ]
    },
    options:{
        responsive:true,
        maintainAspectRatio:false,
        plugins:{
            legend:{ display:true }
        }
    },
    plugins:[{
        id:'valueOnBar',
        afterDatasetsDraw(chart){
            const {ctx} = chart;
            chart.data.datasets.forEach((dataset,i)=>{
                chart.getDatasetMeta(i).data.forEach((bar,index)=>{
                    let value = dataset.data[index];
                    ctx.fillStyle = "black";
                    ctx.font = "12px Arial";
                    ctx.textAlign = "center";
                    ctx.fillText(value.toFixed(2), bar.x, bar.y - 5);
                });
            });
        }
    }]
});

function startMode(selectedMode){

if(running) return;

if(selectedMode==="dorsi" && dorsiSet>5){
    alert("Dorsi ‡∏Ñ‡∏£‡∏ö 5 ‡πÄ‡∏ã‡∏ó‡πÅ‡∏•‡πâ‡∏ß");
    return;
}

if(selectedMode==="plantar" && plantarSet>5){
    alert("Plantar ‡∏Ñ‡∏£‡∏ö 5 ‡πÄ‡∏ã‡∏ó‡πÅ‡∏•‡πâ‡∏ß");
    return;
}

mode = selectedMode;
running = true;

// ‡∏£‡∏µ‡πÄ‡∏ã‡∏ï‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏£‡∏≤‡∏ü Rate
rateChart.data.labels=[];
rateChart.data.datasets[0].data=[];
rateChart.update();

let timeLeft = duration;
prevAngle = 0;

document.getElementById("statusText").innerText="‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ù‡∏∂‡∏Å: "+mode.toUpperCase();

timer=setInterval(()=>{

// ===== ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Ñ‡πà‡∏≤ MPU =====
let y = (Math.random()*30 - 15).toFixed(2);
let angle = parseFloat(y);

// ‡πÅ‡∏¢‡∏Å‡∏Ñ‡πà‡∏≤
let plantarVal = 0;
let dorsiVal = 0;

if(mode==="dorsi"){
    dorsiVal = Math.max(0, angle);
}else{
    plantarVal = Math.abs(Math.min(0, angle));
}

// ===== ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤ Real-time =====
document.getElementById("dorsi").innerText = dorsiVal.toFixed(2) + "¬∞";
document.getElementById("plantar").innerText = plantarVal.toFixed(2) + "¬∞";

// ===== Rate of Motion =====
let rate = Math.abs(angle - prevAngle);
prevAngle = angle;

// ===== ‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏ö‡∏ö‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á =====
let t = angleChart.data.labels.length;

// ===== Push Data =====
angleChart.data.labels.push(t);
angleChart.data.datasets[0].data.push(plantarVal);
angleChart.data.datasets[1].data.push(dorsiVal);

rateChart.data.labels.push(t);
rateChart.data.datasets[0].data.push(rate);

angleChart.update();
rateChart.update();

timeLeft--;
document.getElementById("timerText").innerText="‡πÄ‡∏ß‡∏•‡∏≤: "+timeLeft+" ‡∏ß‡∏¥";

if(timeLeft<=0){
    clearInterval(timer);
    running=false;

    if(mode==="dorsi"){
        dorsiSet++;
        document.getElementById("dorsiSet").innerText=dorsiSet;
    }else{
        plantarSet++;
        document.getElementById("plantarSet").innerText=plantarSet;
    }

    document.getElementById("statusText").innerText="‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô";
}

},1000);

}

function toggleMode(){
document.body.classList.toggle("dark");
document.body.classList.toggle("light");
}

</script>

</body>
</html>
Pichayatida
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ankle Rehab Monitor</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:#eef3f9;
}

.header{
  background:#1f3c88;
  color:white;
  padding:15px;
  text-align:center;
  font-size:22px;
  font-weight:bold;
  letter-spacing:1px;
}

.container{
  padding:15px;
}

.cardRow{
  display:flex;
  justify-content:space-between;
  margin-bottom:15px;
}

.card{
  background:white;
  width:30%;
  border-radius:12px;
  padding:15px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
  text-align:center;
}

.card h3{
  margin:5px 0;
  color:#1f3c88;
}

.value{
  font-size:28px;
  font-weight:bold;
  margin:10px 0;
}

button{
  padding:8px 14px;
  background:#1f3c88;
  color:white;
  border:none;
  border-radius:6px;
  cursor:pointer;
}

button:hover{
  background:#163172;
}

.chartContainer{
  display:flex;
  gap:15px;
}

.chartBox{
  background:white;
  flex:1;
  padding:15px;
  border-radius:12px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
}

canvas{
  height:350px !important;
}
</style>
</head>

<body>

<div class="header">ANKLE REHABILITATION MONITOR</div>

<div class="container">

<div class="cardRow">

<div class="card">
<h3>DORSI</h3>
<div class="value" id="dorsi">0¬∞</div>
<div>Set <span id="dorsiSet">1</span> / 5</div>
<button onclick="startMode('dorsi')">Start</button>
</div>

<div class="card">
<h3>PLANTAR</h3>
<div class="value" id="plantar">0¬∞</div>
<div>Set <span id="plantarSet">1</span> / 5</div>
<button onclick="startMode('plantar')">Start</button>
</div>

<div class="card">
<h3>STATUS</h3>
<div id="statusText">Ready</div>
<div id="timerText">Time: 0 s</div>
</div>

</div>

<div class="chartContainer">
<div class="chartBox">
<canvas id="angleChart"></canvas>
</div>
<div class="chartBox">
<canvas id="rateChart"></canvas>
</div>
</div>

</div>

<script>

let duration=30;
let timer;
let running=false;
let mode=null;
let dorsiSet=1;
let plantarSet=1;
let prevAngle=0;

let maxDorsi=0;
let maxPlantar=0;
let setIndex=0;

// ===== Line Chart (Angle vs Time) =====
const angleChart=new Chart(document.getElementById("angleChart"),{
type:'line',
data:{
labels:[],
datasets:[
{
label:'Plantar (¬∞)',
data:[],
borderColor:'#007bff',
tension:0.3
},
{
label:'Dorsi (¬∞)',
data:[],
borderColor:'#dc3545',
tension:0.3
}
]
},
options:{
responsive:true,
maintainAspectRatio:false,
scales:{
x:{title:{display:true,text:'Time (s)'}},
y:{title:{display:true,text:'Angle (¬∞)'},min:0,max:40}
}
}
});

// ===== Bar Chart (5 Sets Only) =====
const colors=[
'#007bff','#28a745','#ffc107','#dc3545','#6f42c1'
];

const rateChart=new Chart(document.getElementById("rateChart"),{
type:'bar',
data:{
labels:['Set1','Set2','Set3','Set4','Set5'],
datasets:[{
label:'Total ROM (Plantar max + Dorsi max)',
data:[0,0,0,0,0],
backgroundColor:colors
}]
},
options:{
responsive:true,
maintainAspectRatio:false,
scales:{
y:{beginAtZero:true,title:{display:true,text:'Total ROM (¬∞)'}}
}
},
plugins:[{
id:'valueOnBar',
afterDatasetsDraw(chart){
const {ctx}=chart;
chart.getDatasetMeta(0).data.forEach((bar,index)=>{
let value=chart.data.datasets[0].data[index];
if(value>0){
ctx.fillStyle="#000";
ctx.textAlign="center";
ctx.font="12px Arial";
ctx.fillText(value.toFixed(1),bar.x,bar.y-5);
}
});
}
}]
});

function startMode(selectedMode){

if(running) return;

mode=selectedMode;
running=true;

maxDorsi=0;
maxPlantar=0;
prevAngle=0;

// reset line graph for new set
angleChart.data.labels=[];
angleChart.data.datasets[0].data=[];
angleChart.data.datasets[1].data=[];
angleChart.update();

let timeLeft=duration;
document.getElementById("statusText").innerText="Training: "+mode.toUpperCase();

timer=setInterval(()=>{

let angle=(Math.random()*30-15);
let dorsiVal=0;
let plantarVal=0;

if(mode==="dorsi"){
dorsiVal=Math.max(0,angle);
maxDorsi=Math.max(maxDorsi,dorsiVal);
}else{
plantarVal=Math.abs(Math.min(0,angle));
maxPlantar=Math.max(maxPlantar,plantarVal);
}

document.getElementById("dorsi").innerText=dorsiVal.toFixed(1)+"¬∞";
document.getElementById("plantar").innerText=plantarVal.toFixed(1)+"¬∞";

let t=duration-timeLeft;

angleChart.data.labels.push(t);
angleChart.data.datasets[0].data.push(plantarVal);
angleChart.data.datasets[1].data.push(dorsiVal);
angleChart.update();

timeLeft--;
document.getElementById("timerText").innerText="Time: "+timeLeft+" s";

if(timeLeft<=0){

clearInterval(timer);
running=false;

let totalROM=maxDorsi+maxPlantar;
rateChart.data.datasets[0].data[setIndex]=totalROM;
rateChart.update();

setIndex++;

if(mode==="dorsi"){
dorsiSet++;
document.getElementById("dorsiSet").innerText=dorsiSet;
}else{
plantarSet++;
document.getElementById("plantarSet").innerText=plantarSet;
}

document.getElementById("statusText").innerText="Completed";
}

},1000);
}

</script>
</body>
</html>

